name: Build Push to Amazon ECR

on:
  push:
    branches:
      - release-preproduction
jobs:
  deploy:
    uses: eco/workflows/.github/workflows/deploy-to-eks.yml@v20231102
    with:
      appname: solver-preproduction
      assumed-role: arn:aws:iam::165381489880:role/solver-eks-actions-beam-production
      aws-region: us-east-2
      ecr-repository: eco-solver
      ghenv: production
      ghsha: 5f96d19a040a40c0d8293d07b344b7b9c5e54685
      targetenv: preproduction
